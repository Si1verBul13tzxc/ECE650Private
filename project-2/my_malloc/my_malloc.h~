//project 2 header file: thread safe malloc and free.
#include <stdlib.h>
typedef struct header_tag {
  size_t data_size;
  int allocated;
  struct header_tag * list_prev;
  struct header_tag * list_next;
  struct header_tag * front;
  struct header_tag * back;
} header_t;

//Thread Safe malloc/free: locking version
void * ts_malloc_lock(size_t size);
void ts_free_lock(void * ptr);

//Thread Safe malloc/free: non-locking version
void * ts_malloc_nolock(size_t size);
void ts_free_nolock(void * ptr);

//helper
void * bf_malloc(size_t size);
void init_heap();
void init_l_sentinel_head();
void init_l_sentinel_foot();
header_t * ff_find(size_t size);
header_t * init_header_footer(size_t size, void * new_block);
void add_to_front(header_t * header);
footer_t * find_self_footer(header_t * header, size_t data_size);
footer_t * find_front_footer(header_t * header);
header_t * find_self_header(footer_t * footer, size_t size);
header_t * find_back_header(footer_t * footer);
void delete_from_list(header_t * header);
void split(size_t allocated_data_size, header_t * header);
header_t * bf_find(size_t size);
void bf_free(void * ptr);
